(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='/assets/',b(b.s=0)})([function(a,b,c){a.exports=c(1)},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(2);window.Editor=d.a},function(a,b,c){'use strict';var d=c(3),e=c(7),f=c(8),g=c(11);b.a=class{constructor(a){this.actions=[],this.applyBlock=this.applyBlock.bind(this),this.getSelectedElements=this.getSelectedElements.bind(this),this.getSelection=this.getSelection.bind(this),this.applySelection=this.applySelection.bind(this),this.init(a)}init(a){let{selector:b,placeholder:c}=a,d=this.getSelection();c||(a.placeholder='Insert text here...'),this.props=a;let f=n.wrap(b),h=n('.editor--tools');f.setAttribute('contentEditable',!0),this.registerTrigger({type:'mouseup',fn:function(){if(h.all('button').forEach(function(a){a.removeClass('action--active')}),d.focusOffset-d.anchorOffset){let a=d.anchorNode;if(a=a.tagName?a:a.parentNode,a.tagName){let b=h.all(`[data-tag="${a.tagName.toLowerCase()}"],[data-tag*="${a.parentNode.tagName.toLowerCase()}"]`);b.forEach(function(a){a.addClass('action--active')})}}}});let i=this;this.registerTrigger({type:'mousedown',fn:function(){i.isEmpty()&&(c=f.find('p.editor__placeholder'))&&(c.removeClass('editor__placeholder').innerHTML='<br/>')}}),this.registerTrigger({type:'DOMNodeInserted',fn:function(a){var b=a.target;-1==b.nodeName.indexOf('text')&&b.removeAttribute('style');let c,d;if(b.tagName)switch(b.tagName){case'BLOCKQUOTE':c=b.previousElementSibling,c.tagName==b.tagName&&Object(g.a)(c.innerText)&&(c.remove(),d=n('p',n('br')),b.parentNode.replaceChild(d,b),i.moveCaretToEnd(d));break;case'LI':case'FIGURE':case'FIGCAPTION':c=b.previousSibling,c&&c.tagName==b.tagName&&Object(g.a)(c.innerText)&&c.remove();break;case'SPAN':case'DIV':i.cleanUp();break;case'P':b.parentElement!==i.mainContainer&&i.mainContainer.insertBefore(b,b.parentElement.nextElementSibling);}}});let j=n.wrap(document.body);j.prepend(h),this.mainContainer=f,this.editorTool=h,this.availableTags=[],this.doc=j;var k=this.registerAction.bind(this);e.a.forEach(function(a){k(a)}),this.togglePlaceholder(),j.on('click',function(a){a.target!=f&&!f.contains(a.target)&&i.isEmpty()&&i.togglePlaceholder()}),this.initTrigger()}cleanUp(){let{mainContainer:a}=this,b=a.all('p:empty,span:empty,ul:empty,div:empty');b.forEach((a)=>{a.remove()}),a.all('p > br').forEach((a)=>{0==a.parentElement.innerText.replace(/\s/,'').length&&a.parentElement.remove()}),a.all('span,div:not([class])').forEach(function(b){b.parentElement===a?a.replaceChild(n('p',b.innerText),b):(b.childNodes.forEach(function(a){b.parentElement.appendChild(a)}),b.remove())})}initTrigger(){if(this.triggers){let{triggers:a,mainContainer:b}=this;Object.keys(a).forEach(function(c){a[c].forEach(function(a){b.on(c,a)})})}}registerTrigger(a){let{type:b,fn:c,insertAt:d}=a;this.triggers||(this.triggers={}),this.triggers[b]||(this.triggers[b]=[]),'number'==typeof d?this.triggers[b].splice(d,0,c):this.triggers[b].push(c)}moveCaretToEnd(a){if('undefined'!=typeof window.getSelection&&'undefined'!=typeof document.createRange){var b=document.createRange();b.selectNodeContents(a),b.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(b)}else if('undefined'!=typeof document.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(a),d.collapse(!1),d.select()}}registerAction(a){var b=this,c=this.cleanUp.bind(this),e=a.data;this.availableTags=this.availableTags.concat(e.tag);let g=n('button',[n(`i.fa.fa-${e.icon}`),'description'in e?n('span.tooltip',e.description):''],{on:{click:function(){switch(g.toggleClass('action--active'),a.type){case d.a.Block:b.applyBlock(e.command);break;case d.a.ContentBlock:case d.a.CodeBlock:b.applyContentBlock(e);break;case d.a.Function:e.fn(Object(f.a)(b.mainContainer));}b.cleanUp()}},data:{tag:a.data.tag}});if('onTypeCondition'in e&&this.registerTrigger({type:'keyup',fn:function(a){if(a.keyCode==d.c.Enter){let a=b.getSelection(),c=a.anchorNode;if(c){'#text'==c.nodeName&&(c=c.parentNode);let d=c.previousSibling;if(!d)return!1;if(e.onTypeCondition(d)){b.applySelection(d,d),g.click();let c=a.focusNode;a.removeAllRanges(),c.click(),b.moveCaretToEnd(c),b.triggerEnter()}}}}}),'shortKey'in e){let b=a.data.shortKey;this.registerTrigger({type:'keydown',fn:function(a){-1!=b.indexOf(a.keyCode)&&(-1==!b.indexOf(d.c.Ctrl)?g.click():-1<b.indexOf(d.c.Ctrl)&&a.ctrlKey&&g.click())}})}this.editorTool.append(g)}removePlaceholder(){let a=this.mainContainer.find('p.editor__placeholder');a&&a.remove()}togglePlaceholder(){this.isEmpty()&&!this.mainContainer.all('p.editor__placeholder').length?(this.mainContainer.innerHTML='',this.mainContainer.append(n('p.editor__placeholder',this.props.placeholder))):this.removePlaceholder()}isEmpty(){let a=0==this.mainContainer.innerText.replace(/[\s\n]/,'')&&0==this.mainContainer.all('img').length||0<this.mainContainer.all('.editor__placeholder').length;return a}triggerEnter(){document.execCommand('insertParagraph',!0)}getSelection(){return window.getSelection()}getRange(){let a=this.getSelection();return!!a.rangeCount&&a.getRangeAt(0)}getSelectedElements(){let a=this.getRange(),b=this.getSelection();if(3==a.commonAncestorContainer.nodeType){var c=a.commonAncestorContainer;return c.parentElement==this.mainContainer&&c.parentElement.appendChild(n('p',c),c),[c.parentElement]}for(var d,e=a.commonAncestorContainer.getElementsByTagName('*'),f=[],g=0;d=e[g];g++)b.containsNode(d,!0)&&f.push(d);return f}applyBlock(a){document.execCommand(a)}htmlReplace(){}createRange(a,b){let c=document.createRange();return c.setStartBefore(a,0),c.setEnd(b,b.childNodes.length),c}applySelection(a,b){let c=this.createRange.bind(this)(a,b),d=this.getSelection();0<d.rangeCount&&d.removeAllRanges(),d.addRange(c)}applySelectionByElements(a){this.applySelection(a[0],a[a.length-1])}applyList(a){let b,c,d='LI'==a[0].tagName,e=this.mainContainer,f=n('ul');d||e.insertBefore(f,a[0]),a.forEach(function(a,g){if('UL'!=a.tagName){let h=n(d?'p':'li',a.innerText);d?e.insertBefore(h,a.parentElement):f.append(h),b||(b=h),c=h,a.remove(),d&&a.parentElement&&g==a.parentElement.children.length-1&&a.parentElement.remove()}}),this.applySelection(b,c)}applyCodeBlock(a){document.execCommand('formatBlock',!0,a)}applyContentBlock(a){let b=this.getSelectedElements(),{tag:c,command:e,block:f}=a;switch(c){case'li':this.applyList.bind(this)(b);break;case'blockquote':case'h2':let a,f,g=b[0].tagName.toLowerCase()==c||b[0].parentNode.tagName.toLowerCase()==c,h=g?d.b.Paragraph:e;if(b.forEach(function(b){let c=n(h,b.innerText);a||(a=c),f=c,b.parentNode.insertBefore(c,b),b.remove()}),g){let a=f.parentNode;a&&a!=this.mainContainer&&(a.outerHTML=a.innerHTML)}this.applySelection(a,f);}}}},function(a,b,c){'use strict';var d=c(4),e=c(5),f=c(6);c.d(b,'a',function(){return d.a}),c.d(b,'c',function(){return e.a}),c.d(b,'b',function(){return f.a})},function(a,b){'use strict';b.a={Block:0,ContentBlock:1,Function:2,CodeBlock:3}},function(a,b){'use strict';b.a={Ctrl:91,Enter:13,E:69,B:66,I:73,L:76,U:85,Q:81}},function(a,b){'use strict';b.a={Paragraph:'P',ListU:'UL',ListO:'OL',ListItem:'LI',Image:'FIGURE',Quote:'BLOCKQUOTE',H2:'H2'}},function(a,b,c){'use strict';var d=c(3);let e=[{name:'bold',type:d.a.Block,data:{icon:'bold',command:'bold',tag:'b',shortKey:[d.c.Ctrl,d.c.B],description:'Bold text (Ctrl + B)'}},{name:'italic',type:d.a.Block,data:{icon:'italic',command:'italic',tag:'i',shortKey:[d.c.Ctrl,d.c.I],description:'Italic text (Ctrl + I)'}},{name:'quote',type:d.a.CodeBlock,data:{icon:'quote-left',command:d.b.Quote,tag:'blockquote',description:'Quote style'}},{name:'header',type:d.a.CodeBlock,data:{icon:'header',command:d.b.H2,tag:'h2',description:'Heading style'}},{name:'list',type:d.a.ContentBlock,data:{icon:'list-ul',block:'list',tag:'li',onTypeCondition:function(a){let b=a.textContent,c='-'==b.substr(0,1)&&'LI'!=a.tagName;if(c){let c=' '==b.substr(1,2)?2:1;a.textContent=b.substr(c,b.length-1)}return c},description:'List style'}}];b.a=e},function(a,b,c){'use strict';var d=c(9),e=c(10);c.d(b,'a',function(){return d.a})},function(a,b){'use strict';b.a=function(a){let{contents:b}=a,c=[];for(let d of b)if(d.innerText.replace(/\s/,'').length||d.childNodes.length){let a=d.tagName.toLowerCase(),b=null;switch(a){case'ul':b=[];for(let a of d.children)b.push(a.innerText);break;case'figure':case'img':let c=d.src||d.querySelector('[src]'),e=d.querySelector('span,figcaption,div,p');if(!c)return;b={src:c.src,alt:c.alt,caption:e.innerText};break;default:b=d.innerText;}c.push({type:a,content:b})}return c}},function(){'use strict'},function(a,b){'use strict';function c(a){return a.replace(/[\s\n]/,'')}b.a=function(a){return 0===c(a).length}}]);